<div class="container mx-auto px-4 py-8">
  <!-- Header -->
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-gray-800">User Management</h1>
    <a routerLink="/users/add"
       class="inline-flex items-center gap-2 rounded-lg bg-[#ea580c] px-5 py-2.5 
              text-white font-semibold shadow-md hover:bg-[#c2410c] 
              transition-all duration-300 ease-in-out">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
           stroke="currentColor" class="w-5 h-5">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 4v16m8-8H4" />
      </svg>
      Add New User
    </a>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage"
       class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6">
    {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex justify-center items-center h-64">
    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#ea580c]"></div>
  </div>

  <!-- Users Table OR Empty State -->
  <div *ngIf="!isLoading" class="card overflow-hidden">
    <div *ngIf="users.length > 0; else emptyState">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <!-- Table Head -->
          <thead class="bg-gray-50">
            <tr>
              <th scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                User
              </th>
              <th scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Contact
              </th>
              <th scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Department
              </th>
              <th scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Join Date
              </th>
              <th scope="col"
                  class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                Actions
              </th>
            </tr>
          </thead>

          <!-- Table Body -->
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let user of users" class="hover:bg-gray-50 transition-colors">
              <!-- User Info -->
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <div class="h-10 w-10 flex-shrink-0">
                    <img class="h-10 w-10 rounded-full ring-2 ring-[#ea580c]"
                         [src]="user.avatar" [alt]="user.name" alt=""/>
                  </div>
                  <div class="ml-4">
                    <div class="text-sm font-semibold text-gray-900">
                      {{ user.name }}
                    </div>
                    <div class="text-xs font-medium text-[#ea580c]">
                      {{ user.position }}
                    </div>
                  </div>
                </div>
              </td>

              <!-- Contact -->
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900">
                  {{ user.email }}
                </div>
                <div class="text-xs text-gray-500">
                  {{ user.phone }}
                </div>
              </td>

              <!-- Department -->
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <span class="px-2 py-1 rounded-full text-xs font-medium 
                             bg-[#fff7ed] text-[#ea580c]">
                  {{ user.department }}
                </span>
              </td>

              <!-- Join Date -->
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <span class="text-gray-700 font-medium">
                  {{ user.joinDate }}
                </span>
              </td>

              <!-- Actions -->
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <a [routerLink]="['/users/edit', user.id]"
                   class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-md 
                          bg-[#ea580c] text-white hover:bg-[#c2410c] transition-colors duration-200 mr-3">
                  Edit
                </a>

                <button (click)="deleteUser(user.id!)"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-md 
                               bg-red-600 text-white hover:bg-red-700 transition-colors duration-200">
                  Delete
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Empty State -->
    <ng-template #emptyState>
      <div class="text-center py-12">
        <svg xmlns="http://www.w3.org/2000/svg"
             class="h-12 w-12 mx-auto text-gray-400" fill="none"
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900">No users</h3>
        <p class="mt-1 text-sm text-gray-500">Get started by creating a new user.</p>
        <div class="mt-6">
          <a routerLink="/users/add"
             class="inline-flex items-center gap-2 rounded-lg bg-[#ea580c] px-5 py-2.5 
                    text-white font-semibold shadow-md hover:bg-[#c2410c] 
                    transition-all duration-300 ease-in-out">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 4v16m8-8H4" />
            </svg>
            Add User
          </a>
        </div>
      </div>
    </ng-template>
  </div>
</div>
